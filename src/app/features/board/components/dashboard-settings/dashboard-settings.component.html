<div class="dashboard-settings" (scroll)="onScroll()">
  <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–∞—à–±–æ—Ä–¥–∞</h2>
  <nav class="tabs">
    <button [class.active]="tab === 'info'" (click)="tab = 'info'">
      <span class="tab-icon">‚ÑπÔ∏è</span> –û–±—â–∏–µ —Å–≤–µ–¥–µ–Ω–∏—è
    </button>
    <button [class.active]="tab === 'users'" (click)="tab = 'users'">
      <span class="tab-icon">üë•</span> –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
    </button>
  </nav>

  <div *ngIf="boardLoading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
  <div *ngIf="boardError" class="error">{{ boardError }}</div>

  <app-dashboard-settings-info-tab
    *ngIf="tab === 'info' && board && !boardLoading && !boardError"
    [board]="board"
  ></app-dashboard-settings-info-tab>

  <app-dashboard-settings-users-tab
    *ngIf="tab === 'users'"
    [users]="users"
    [permissionFields]="permissionFields"
    [permissionFieldLabels]="permissionFieldLabels"
    [accessLevels]="accessLevels"
    [accessIcons]="accessIcons"
    [accessTitles]="accessTitles"
    [originalPermissions]="originalPermissions"
    [hasMatrixChanges]="hasMatrixChanges"
    (addUser)="addUser()"
    (removeUser)="removeUser($event)"
    (cyclePermission)="
      cyclePermission($event.user, $event.field, $event.domEvent)
    "
    (openPermissionMenu)="
      openPermissionMenu($event.user, $event.field, $event.domEvent)
    "
    (saveMatrixChanges)="saveMatrixChanges()"
    [permissionMenuShow]="permissionMenuShow"
    [permissionMenuLeft]="permissionMenuLeft"
    [permissionMenuTop]="permissionMenuTop"
    [permissionMenuUser]="permissionMenuUser"
    [permissionMenuField]="permissionMenuField"
    [showInviteModal]="showInviteModal"
    [inviteEmail]="inviteEmail"
    (inviteEmailChange)="inviteEmail = $event"
    [inviteError]="inviteError"
    (confirmInvite)="confirmInvite()"
    (closeModal)="closeModal()"
    (closePermissionMenu)="closePermissionMenu()"
    (selectPermission)="selectPermission($event)"
  ></app-dashboard-settings-users-tab>
</div>
