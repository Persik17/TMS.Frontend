<header class="main-header">
  <div class="header-left">
    <a class="company-link" routerLink="/boards">{{ companyName }}</a>
    <span *ngIf="boardName" class="board-name">{{ boardName }}</span>
    <span *ngIf="taskName" class="task-name">— {{ taskName }}</span>
  </div>
  <div class="header-center">
    <app-global-search
      class="header-search"
      (select)="onGlobalSelect($event)"
    ></app-global-search>
  </div>
  <div class="header-right">
    <a class="profile-username-link" routerLink="/profile">
      {{ user.username || "" }}
    </a>
    <div class="profile-menu-container" [class.open]="menuOpen">
      <div
        class="profile-avatar initials"
        *ngIf="userInitials; else noUser"
        [ngStyle]="{ 'background-color': initialsColor }"
        (click)="toggleMenu($event)"
      >
        {{ userInitials }}
      </div>
      <ng-template #noUser>
        <div class="profile-avatar icon" (click)="toggleMenu($event)">
          <span class="material-icons">person</span>
        </div>
      </ng-template>
      <div class="profile-dropdown" *ngIf="menuOpen">
        <button class="profile-menu-item" (click)="goToProfile()">
          <span class="material-icons">person</span>
          Мой профиль
        </button>
        <button class="profile-menu-item logout-btn" (click)="logout()">
          <span class="material-icons">logout</span>
          Выйти
        </button>
      </div>
    </div>
  </div>
</header>
