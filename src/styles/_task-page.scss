@import "./task-common";

$task-page-max-width: 1200px;
$task-page-min-height: 90vh;
$task-page-margin: 1.5vh auto 0 auto;
$task-page-bg: #fcfcfe;
$task-page-radius: 24px;
$task-page-shadow: 0 8px 36px rgba(44, 62, 80, 0.18);
$task-page-width: 96vw;

$task-header-bg: #222c68;
$task-header-color: #fff;
$task-header-padding: 1.2rem 2.5rem 1rem 2.5rem;
$task-header-radius: 24px 24px 0 0;
$task-header-font-size: 1.55rem;
$task-header-font-weight: 700;
$task-header-min-height: 44px;

$task-title-size: 1.45rem;
$task-title-weight: 700;
$task-title-color: #fff;
$task-title-spacing: 0.5px;
$task-title-line: 1.1;

$task-meta-size: 0.98rem;
$task-meta-color: #cfd6eb;
$task-meta-gap: 1.4em;
$meta-label-color: #cfd6eb;
$meta-value-color: #fff;

$task-actions-gap: 0.3rem;

$icon-btn-color: #fff;
$icon-btn-size: 1.7rem;
$icon-btn-bg-hover: rgba(255, 255, 255, 0.12);

$task-tabs-bg: #f6f7fa;
$task-tabs-gap: 0.4em;
$task-tabs-padding: 0.6em 2.5em 0.4em 2.5em;
$task-tabs-border: 1.5px solid #e3e6eb;
$task-tabs-btn-radius: 9px 9px 0 0;
$task-tabs-btn-color: #222c68;
$task-tabs-btn-bg-active: #e5e8f5;
$task-tabs-btn-color-active: #1a237e;

$task-main-gap: 2.5rem;
$task-main-padding: 1.5rem 2.5rem 2.4rem 2.5rem;
$task-main-bg: #fcfcfe;

$task-info-gap: 1.15rem;
$info-row-font-size: 1.13rem;
$info-row-gap: 1.2em;
$info-title-weight: 700;
$info-title-color: #222c68;
$edit-btn-color: #b0b7d6;
$edit-btn-hover: #222c68;

$input-radius: 7px;
$input-border: 1.3px solid #bfc6db;
$input-padding: 2px 8px;
$input-focus-border: #222c68;

$history-bg: #f7f8fa;
$history-radius: 7px;
$history-padding: 0.6em 1.1em;
$history-shadow: 0 1px 3px 0 rgba(153, 167, 190, 0.045);
$history-gap: 1.3em;
$history-date-color: #7a7a9a;
$history-user-color: #293184;
$history-user-weight: 600;

$file-bg: #f7f8fa;
$file-radius: 7px;
$file-padding: 0.6em 1.1em;
$file-icon-color: #222c68;
$file-icon-size: 1.5em;
$file-size-color: #7a7a9a;
$file-upload-margin: 1em;
$upload-btn-color: #293184;
$upload-btn-weight: 500;
$upload-btn-size: 1.1em;

$comments-bg: #f7f8fa;
$comments-radius: 18px;
$comments-shadow: 0 0 0 1.5px #e3e6eb;
$comments-padding: 1.5rem 1.2rem;
$comments-title-color: #222c68;
$comments-title-size: 1.13rem;

$comment-card-bg: #fff;
$comment-card-radius: 10px;
$comment-card-shadow: 0 1px 6px 0 rgba(153, 167, 190, 0.09);
$comment-card-padding: 0.7em 1em 0.8em 1em;
$avatar-size: 38px;
$avatar-radius: 50%;
$comment-meta-size: 1.05em;
$comment-meta-gap: 1.4em;
$author-color: #222c68;
$author-weight: 600;
$date-color: #999;
$text-size: 1.09em;

$add-comment-gap: 0.7em;
$add-comment-margin: 1.7em;
$add-comment-textarea-radius: 10px;
$add-comment-textarea-border: 1.5px solid #d0d5de;
$add-comment-textarea-padding: 0.6em 0.9em;
$add-comment-textarea-size: 1.13em;
$add-comment-btn-bg: #222c68;
$add-comment-btn-radius: 50%;
$add-comment-btn-size: 1.75em;
$add-comment-btn-width: 44px;
$add-comment-btn-height: 44px;
$add-comment-btn-disabled-bg: #b0bec5;

$loading-label-size: 1.2rem;
$loading-label-color: #333;

.task-page-root {
  background: #fff;
  border-radius: 14px;
  margin: 0 auto;
  max-width: 980px;
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.09);
  padding: 0 0 32px 0;
  min-height: 540px;
}

.task-main-content-layout {
  display: flex;
  flex-direction: row;
  gap: 36px;
  padding: 32px 32px 0 32px;
}

.task-main-fields {
  flex: 2;
  display: flex;
  flex-direction: column;
  gap: 22px;
}

.field-row {
  display: flex;
  align-items: center;
  gap: 10px;

  .field-label {
    font-weight: 500;
    color: #23346c;
    min-width: 110px;
    font-size: 1.05rem;
  }
  .field-value {
    font-size: 1.05rem;
    color: #313131;
  }
}

.task-comments-block {
  flex: 1;
  background: #f7f7fa;
  border-radius: 8px;
  padding: 20px 18px 14px 18px;
  box-shadow: 0 2px 6px rgba(42, 44, 58, 0.05);
  margin-left: 24px;
  min-width: 260px;
  max-width: 340px;
}

.task-page-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  border-bottom: 1px solid #e0e0e0;
  padding: 24px 32px 14px 32px;
  background: #23346c;
  border-radius: 14px 14px 0 0;
  color: #fff;

  .task-page-title {
    font-size: 2rem;
    font-weight: 700;
    margin-bottom: 6px;
  }
  .task-meta {
    font-size: 0.98rem;
    color: #cfd8dc;
    .meta-label {
      margin-right: 2px;
    }
    .meta-value {
      margin-right: 12px;
    }
  }
}

.task-page-title {
  font-size: $task-title-size;
  font-weight: $task-title-weight;
  letter-spacing: $task-title-spacing;
  line-height: $task-title-line;
}

.task-meta {
  font-size: $task-meta-size;
  margin-top: 0.25em;
  color: $task-meta-color;
  display: flex;
  gap: $task-meta-gap;
}
.meta-label {
  color: $meta-label-color;
}
.meta-value {
  color: $meta-value-color;
}

.task-page-actions {
  display: flex;
  gap: 12px;
  margin-top: 4px;

  .icon-btn {
    background: none;
    border: none;
    color: #fff;
    font-size: 1.35rem;
    cursor: pointer;
    padding: 4px 8px;
    border-radius: 5px;
    transition: background 0.13s;
    &:hover {
      background: #263674;
    }
  }
}

.icon-btn {
  background: none;
  border: none;
  color: $icon-btn-color;
  font-size: $icon-btn-size;
  cursor: pointer;
  padding: 8px;
  border-radius: 50%;
  transition: background 0.16s;
  display: flex;
  align-items: center;
  justify-content: center;
  &:hover {
    background: $icon-btn-bg-hover;
  }
}

.task-tabs {
  display: flex;
  gap: 22px;
  padding: 13px 32px 0 32px;
  background: #fff;
  border-bottom: 1px solid #e0e0e0;

  button {
    font-size: 1.08rem;
    background: none;
    border: none;
    cursor: pointer;
    padding: 5px 22px 5px 0;
    color: #23346c;
    border-bottom: 2px solid transparent;
    transition: border 0.13s;
    &:hover {
      color: #1e294f;
    }
    &.active {
      font-weight: 700;
      border-bottom: 2px solid #23346c;
    }
  }
}

.task-page-main {
  flex: 1 1 auto;
  display: flex;
  flex-direction: row;
  gap: $task-main-gap;
  padding: $task-main-padding;
  min-width: 0;
  background: $task-main-bg;
  box-sizing: border-box;
  width: 100%;
  max-width: 100%;
  overflow-x: hidden;
}

.task-page-info {
  flex: 1 1 55%;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: $task-info-gap;
  word-break: break-word;
}

.info-row {
  display: flex;
  font-size: $info-row-font-size;
  gap: $info-row-gap;
  align-items: flex-start;
  line-height: 1.47;
  word-break: break-word;
}

.info-title {
  font-weight: $info-title-weight;
  min-width: 130px;
  color: $info-title-color;
}

.edit-btn {
  margin-left: 10px;
  color: #b0b7d6;
  font-size: 1.13em;
  background: none;
  border: none;
  cursor: pointer;
  vertical-align: middle;
  transition: color 0.12s;
  &:hover {
    color: #222c68;
  }
}

.edit-hover,
.edit-btn:focus {
  background: #f6f7fa !important;
  border-radius: 7px;
}

.editing-input {
  border: 2px solid #222c68;
  border-radius: 7px;
  padding: 6px 14px;
  font-size: 1.08em;
  outline: none;
  min-width: 200px;
  background: #f5f6fa;
  margin-right: 6px;
}

.save-btn,
.cancel-btn {
  background: none;
  border: none;
  color: #222c68;
  font-size: 1.3em;
  cursor: pointer;
  margin-right: 2px;
  vertical-align: middle;
}
.save-btn:hover {
  color: #4caf50;
}
.cancel-btn:hover {
  color: #ff5252;
}

input[type="text"],
input[type="number"],
input[type="datetime-local"] {
  font-size: 1em;
  border-radius: $input-radius;
  border: $input-border;
  padding: $input-padding;
  margin-left: 2px;
  outline: none;
  min-width: 90px;
}
input:focus {
  border-color: $input-focus-border;
}

.task-history {
  flex: 1 1 55%;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 1.1em;
  font-size: 1.08em;
}
.history-record {
  background: $history-bg;
  border-radius: $history-radius;
  padding: $history-padding;
  box-shadow: $history-shadow;
  display: flex;
  gap: $history-gap;
  align-items: center;
}
.history-date {
  color: $history-date-color;
  min-width: 120px;
}
.history-user {
  font-weight: $history-user-weight;
  color: $history-user-color;
  min-width: 70px;
}
.history-text {
  flex: 1;
}

.task-files {
  flex: 1 1 55%;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 1.1em;
}
.file-row {
  display: flex;
  align-items: center;
  gap: 0.8em;
  background: $file-bg;
  border-radius: $file-radius;
  padding: $file-padding;
}
.file-icon {
  color: $file-icon-color;
  font-size: $file-icon-size;
}
.file-size,
.file-date {
  font-size: 0.97em;
  color: $file-size-color;
}
.file-upload {
  margin-top: $file-upload-margin;
}
.upload-btn {
  cursor: pointer;
  color: $upload-btn-color;
  font-weight: $upload-btn-weight;
  font-size: $upload-btn-size;
  display: inline-flex;
  align-items: center;
  gap: 0.2em;
  .material-icons {
    font-size: 1.2em;
  }
}

.task-page-comments {
  background: #f7f8fa;
  border-radius: 18px;
  box-shadow: 0 0 0 1.5px #e3e6eb;
  padding: 1.5rem 1.2rem;
  max-width: 380px;
  min-width: 260px;
  display: flex;
  flex-direction: column;
  gap: 1.4rem;
  word-break: break-word;
}
.comments-title {
  font-weight: 700;
  margin-bottom: 1.1rem;
  font-size: 1.13rem;
  color: #222c68;
}
.comment-card {
  display: flex;
  align-items: flex-start;
  gap: 0.9em;
  background: #fff;
  border-radius: 10px;
  box-shadow: 0 1px 6px 0 rgba(153, 167, 190, 0.09);
  padding: 0.7em 1em 0.8em 1em;
  margin-bottom: 0.7em;
}
.avatar {
  width: 38px;
  height: 38px;
  border-radius: 50%;
  object-fit: cover;
  margin-right: 0.8em;
  flex-shrink: 0;
  background: #e3e6eb;
}
.comment-card-content {
  flex: 1;
  min-width: 0;
}
.comment-meta {
  font-size: 1.05em;
  margin-bottom: 0.3em;
  display: flex;
  gap: 1.4em;
  align-items: center;
}
.author {
  font-weight: 600;
  color: #222c68;
}
.date {
  color: #999;
  font-size: 0.97em;
}
.text {
  font-size: 1.09em;
  margin-bottom: 0.2em;
  word-break: break-word;
}
.no-comments {
  color: #b0b7d6;
  font-size: 1.07em;
  margin-bottom: 1.2em;
  text-align: center;
}
.add-comment {
  display: flex;
  align-items: flex-end;
  gap: 0.7em;
  margin-top: 1.7em;
}
.add-comment textarea {
  flex: 1 1 auto;
  border-radius: 10px;
  border: 1.5px solid #d0d5de;
  padding: 0.6em 0.9em;
  min-height: 38px;
  font-size: 1.13em;
  resize: vertical;
  transition: border 0.18s;
  background: #fff;
  &:focus {
    border-color: #222c68;
    outline: none;
  }
}
.add-comment-btn {
  background: #222c68;
  border: none;
  border-radius: 50%;
  width: 44px;
  height: 44px;
  color: #fff;
  font-size: 1.75em;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.18s;
  cursor: pointer;
  &:disabled {
    opacity: 0.7;
    background: #b0bec5;
    cursor: not-allowed;
  }
}

.loading-label {
  text-align: center;
  margin: 80px 0;
  font-size: 1.4rem;
  color: #23346c;
}

@media (max-width: 1000px) {
  .task-page-root {
    width: 100vw;
    border-radius: 0;
  }
  .task-page-main {
    flex-direction: column;
    gap: 1.2rem;
    padding: 1.2rem 1vw;
  }
  .task-page-info,
  .task-page-comments,
  .task-history,
  .task-files {
    flex: 1 1 100%;
    max-width: 100vw;
  }
  .task-tabs {
    padding-left: 1vw;
    padding-right: 1vw;
  }
}
